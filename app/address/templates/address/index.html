{% load bootstrap4 %}
{% bootstrap_css %}
{% bootstrap_javascript jquery='full' %}
{% bootstrap_messages %}
{% load static %}
<!-- <html zlang="en"> -->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Address Migration</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <style>
        body{
            margin: 0;
            font-family: var(--bs-font-sans-serif);
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #212529;
            background-color: #fff;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
        }
        .todo_check{
            float: right
        }
        .float_right{
            float: right
        }
        #app{
            position: relative
        }
        .container{
            position: relative;
            top: 20%;
        }
        .row {
            margin-bottom: 10px;
        }
        .text-vertical-center {
            display: flex;
            align-items: center;
        }
    </style>
    
</head>
<body id="app">
    {% block content %}
    <div class="container">
        <div class="col-sm-14 col-md-10 col-lg-10 mx-auto">
    		<div class="card card-signin my-5">
    			<div class="card-body">
            {% comment %} <di class="row">
                <label for="exampleInputEmail1">공통계정</label>
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="commonId" placeholder="공통ID">
                </div>
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="commonPassword" placeholder="공통비번">
                </div>
            </di> {% endcomment %}
						<div class="form-row">
                            <label for="exampleInputEmail1">주소</label>
                            <div class="input-group mb-3 ">
								<input type="text" name="postcode" id="postcode" class="form-control postcodify_postcode5" value="06540" />
								<button class="btn btn-primary form-control" id="postcodify_search_button" onclick="openAddressPopup()">검색</button>
                            </div>
							
							<div class="input-group mb-3">
								<input type="text" id="address" class="form-control postcodify_address" value="서울특별시 서초구 주흥길 14" /><br />
							</div>
							<div class="input-group mb-3">
								<input type="text" id="details" class="form-control postcodify_details" value="305호" /><br />
							</div>

                            {% comment %} <label for="inputPassword3">전화번호</label> {% endcomment %}
                            <div class="row">
                                <div class="col">
                                    <label for="inputPassword3">수취인</label>
                                    <div class="input-group mb-3 row">
                                        <div class="col">
                                            <input type="text" class="form-control" name="recipient" id="recipient"  value="나경원">
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <label for="inputPassword3">수신지(선택)</label>
                                    <div class="input-group mb-3 row">
                                        <div class="col">
                                            <input type="text" class="form-control" name="shipping_address" id="shipping_address" value="우리집">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <label for="inputPassword3">전화번호</label>    
                                    <div class="input-group mb-3 row">
                                        <div class="col">
                                            <input type="text" class="form-control" name="phone_number_head" id="phone_number_head" value="010">
                                        </div>
                                        <span class="text-vertical-center">-</span>
                                        <div class="col">
                                            <input type="text" class="form-control" name="phone_number_middle" id="phone_number_middle" value="9044">
                                        </div>
                                        <span class="text-vertical-center">-</span>
                                        <div class="col">
                                            <input type="text" class="form-control" name="phone_number_tail" id="phone_number_tail" value="8972">
                                        </div>
                                    </div>
                                </div>  
                            </div>
							{% comment %} <input type="text" name="" id="extra_info" class="postcodify_details" value="" /><br /> {% endcomment %}
                            <div class="row">
                            <div    class="col input-group mb-3">
                                <button class="btn btn-primary form-control" id="add_vendor"> + 추가 </button>
                            </div> 
                            </div>
						</div>
						<div id="vendor_area">
							<form name="addressform">
								<div class="row align-items-center">
									<div class="col">
										<select class="form-control" name="vendor">
											<option value="musinsa">무신사</option>
										</select>
									</div>
									<div class="col">
										<input type="text" class="form-control" name="vendor_id" placeholder="ID" value="saecomaster">
									</div>
									<div class="col">
										<input type="password" class="form-control" name="vendor_password" placeholder="password" value="sksmssk12!">
									</div>
									<div class="col">
										<button class="btn btn-primary form-control" onclick="changeAddress()">바꾸기</button>
									</div>
								</div>
							</form>
						</div>
        		</div>
        	</div>
        </div>
    </div>

    <div class="container">
        <div class="row">
        <div class="col-sm-9 col-md-7 col-lg-10 mx-auto">
            <div class="card card-signin my-5">
            <div class="card-body">
                <h5 class="card-title text-center">Sign In</h5>
                <form class="form-signin">
                <div class="form-label-group">
                    <input type="email" id="inputEmail" class="form-control" placeholder="Email address" required autofocus>
                    <label for="inputEmail">Email address</label>
                </div>

                <div class="form-label-group">
                    <input type="password" id="inputPassword" class="form-control" placeholder="Password" required>
                    <label for="inputPassword">Password</label>
                </div>

                <div class="custom-control custom-checkbox mb-3">
                    <input type="checkbox" class="custom-control-input" id="customCheck1">
                    <label class="custom-control-label" for="customCheck1">Remember password</label>
                </div>
                <button class="btn btn-lg btn-primary btn-block text-uppercase" type="submit">Sign in</button>
                <hr class="my-4">
                <button class="btn btn-lg btn-google btn-block text-uppercase" type="submit"><i class="fab fa-google mr-2"></i> Sign in with Google</button>
                <button class="btn btn-lg btn-facebook btn-block text-uppercase" type="submit"><i class="fab fa-facebook-f mr-2"></i> Sign in with Facebook</button>
                </form>
            </div>
            </div>
        </div>
        </div>
    </div>
    
    {% endblock %}
</body>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="//d1p7wdleee1q2z.cloudfront.net/post/search.min.js"></script>
<script type="text/javascript">
    {% comment %} function openAddressPopup(){ {% endcomment %}
        /*var url = location.href
        var confmKey = "devU01TX0FVVEgyMDIxMDYxNzAwNDIyMDExMTI5MTE="
        var resultType = '4'
        var inputYn = "<?=ADDR['inputYn']?>"
        if(inputYn != "Y"){
            document.form.confmKey.value = confmKey;
            document.form.returnUrl.value = url;
            document.form.resultType.value = resultType;
            document.form.action.value = "http://www.juso.go.kr/addrlink/addrLinkUrl.do";
            document.form.submit()
        } else {
            opener.jusoCallBack("<?=$ADDR[roadFullAddr]?>", "<?=$ADDR[roadAddrPart1]?>", "<?=$ADDR[addrDetail]?>")
            window.close()
        } */
        
    {% comment %} } {% endcomment %}
    $(function() {
        $("#postcodify_search_button").postcodifyPopUp( {
            forceDisplayPostcode5 : true,
            insertPostcode5 : "#postcode",
            insertAddress : "#address",
            insertDetails : "#details",
            insertExtraInfo : "#extra_info",
            hideOldAddresses : false
        } );

        $('#add_vendor').click(function(){
			var row_str = ''
			row_str += '<div class="row align-items-center">'
           	row_str += '	<div class="col">'
			row_str += '		<select class="form-control" name="vendor">'
			row_str += '			<option value="service">쿠팡</option>'
			row_str += '		</select>'
			row_str += '	</div>'
			row_str += '	<div class="col">'
			row_str += '		<input type="text" class="form-control" placeholder="ID">'
			row_str += '	</div>'
			row_str += '	<div class="col">'
			row_str += '		<input type="password" class="form-control" placeholder="password">'
			row_str += '	</div>'
			row_str += '	<div class="col">'
			row_str += '		<button class="btn btn-primary form-control">바꾸기</button>'
			row_str += '	</div>'
			row_str += '</div>'

			var origin_html = $("#vendor_area").html()
			console.log(origin_html)
			console.log(row_str)
			$("#vendor_area").html(origin_html + row_str)
        })
    })
	function changeAddress(){
        event.preventDefault();
		var queryString = $("form[name=addressform]").serialize();
        var postcode = $("#postcode").val()
        var address = $("#address").val()
        var details = $("#details").val()
        var recipient = $("#recipient").val()
        var shipping_address = $("#shipping_address").val()
        var phone_number_head = $("#phone_number_head").val()
        var phone_number_middle = $("#phone_number_middle").val()
        var phone_number_tail = $("#phone_number_tail").val()
        queryString = queryString+'&postcode='+postcode+'&address='+address+'&details='+details+'&recipient='+recipient+'&shipping_address='+shipping_address+'&phone_number_head='+phone_number_head+'&phone_number_middle='+phone_number_middle+'&phone_number_tail='+phone_number_tail
        console.log(queryString)
        $.ajax({
            type : 'post',
            url: "{% url 'address' %}",
            beforeSend : function(xhr){
                xhr.setRequestHeader("X-CSRFToken", '{{ csrf_token }}');
                xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            },
            data : queryString,
            dataType : 'json',
            error: function(xhr, status, error){
                alert(error);
            },
            success : function(json){
                alert(json)
            }
        });
	}
</script>
</html>


